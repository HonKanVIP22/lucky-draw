<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Lucky Draw</title>
<style>
body{
  background:linear-gradient(135deg,#1d2671,#c33764);
  font-family:'Segoe UI',Arial;
  color:#fff;
  text-align:center;
  min-height:100vh;
  margin:0;
}
.container{
  padding-top:60px;
}
h1{
  font-size:48px;
  margin-bottom:20px;
}
.card{
  background:#fff;
  color:#333;
  display:inline-block;
  padding:30px 50px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.3);
  min-width:420px;
}
button{
  background:#c33764;
  border:none;
  color:#fff;
  font-size:26px;
  padding:14px 40px;
  border-radius:40px;
  cursor:pointer;
  margin-top:20px;
}
button:hover{opacity:.9}
#result{
  font-size:42px;
  margin-top:30px;
  color:#c33764;
  min-height:60px;
}
input[type=file]{
  margin-top:15px;
}
#log{
  margin-top:25px;
  text-align:left;
  max-height:200px;
  overflow:auto;
  font-size:14px;
}
</style>
</head>
<body>

<div class="container">
  <h1>üéØ QUAY S·ªê MAY M·∫ÆN</h1>

  <div class="card">
    <div>
      <strong>üì• Import danh s√°ch (CSV)</strong><br>
      <input type="file" id="fileInput" accept=".csv">
    </div>

    <button onclick="draw()">QUAY</button>

    <div id="result">---</div>

    <div id="log"></div>
  </div>
</div>

<script>
let items = [];

document.getElementById("fileInput").addEventListener("change", function(e){
  const file = e.target.files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = function(){
    const lines = reader.result.split("\n");
    items = [];
    for(let i=1;i<lines.length;i++){
      const [code,name] = lines[i].split(",");
      if(code && name){
        items.push({code:code.trim(), name:name.trim()});
      }
    }
    alert("ƒê√£ import " + items.length + " ng∆∞·ªùi");
  };
  reader.readAsText(file,"UTF-8");
});

function draw(){
  if(items.length === 0){
    document.getElementById("result").innerText = "H·∫æT DANH S√ÅCH";
    return;
  }

  let spin = 20;
  let temp;
  let interval = setInterval(()=>{
    temp = items[Math.floor(Math.random()*items.length)];
    document.getElementById("result").innerText =
      temp.code + " - " + temp.name;
    spin--;
    if(spin<=0){
      clearInterval(interval);
      let index = items.indexOf(temp);
      items.splice(index,1);
      log(temp);
    }
  },80);
}

function log(item){
  const div = document.getElementById("log");
  div.innerHTML += "‚úî " + item.code + " - " + item.name + "<br>";
}
</script>

</body>
</html>
