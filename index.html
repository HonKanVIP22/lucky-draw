<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Lucky Draw Pro</title>
<style>
body{
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  font-family:'Segoe UI',Arial;
  color:#fff;
  text-align:center;
  margin:0;
}
.container{padding:40px}
.logo{height:80px;margin-bottom:10px}
h1{font-size:46px;margin:10px 0}
.card{
  background:#fff;color:#333;
  display:inline-block;
  padding:30px 50px;
  border-radius:18px;
  min-width:460px;
  box-shadow:0 25px 50px rgba(0,0,0,.35)
}
select,button{
  font-size:18px;
  padding:8px 14px;
  margin-top:10px
}
button{
  background:#e63946;
  color:#fff;
  border:none;
  border-radius:30px;
  padding:14px 40px;
  font-size:26px;
  cursor:pointer
}
button:hover{opacity:.9}
#result{
  font-size:60px;
  font-weight:bold;
  color:#e63946;
  margin-top:25px;
  min-height:70px;
  letter-spacing:2px;
}
#log{
  margin-top:20px;
  text-align:left;
  max-height:220px;
  overflow:auto;
  font-size:15px
}
</style>
</head>
<body>

<div class="container">
  <img src="logo.png" class="logo">
  <h1>üéØ QUAY S·ªê MAY M·∫ÆN</h1>

  <div class="card">

    <div>
      <strong>üéÅ Ch·ªçn gi·∫£i:</strong><br>
      <select id="prize">
        <option>Gi·∫£i Nh·∫•t</option>
        <option>Gi·∫£i Nh√¨</option>
        <option>Gi·∫£i Ba</option>
        <option>Khuy·∫øn Kh√≠ch</option>
      </select>
    </div>

    <button onclick="draw()">QUAY</button>

    <div id="result">---</div>

    <button onclick="exportCSV()">üì• Xu·∫•t k·∫øt qu·∫£</button>

    <div id="log"></div>
  </div>
</div>

<script>
// ================= DANH S√ÅCH QUAY (IMPORT S·∫¥N) =================
let items = [
  { code:"001", name:"Nguy·ªÖn VƒÉn A" },
  { code:"002", name:"Tr·∫ßn Th·ªã B" },
  { code:"003", name:"L√™ VƒÉn C" },
  { code:"004", name:"Ph·∫°m Th·ªã D" },
  { code:"005", name:"Ho√†ng VƒÉn E" },
  { code:"006", name:"V√µ Th·ªã F" },
  { code:"007", name:"ƒê·∫∑ng VƒÉn G" },
  { code:"008", name:"B√πi Th·ªã H" },
  { code:"009", name:"Ng√¥ VƒÉn I" },
  { code:"010", name:"D∆∞∆°ng Th·ªã K" }
  // üëâ th√™m t·ªõi 70 ng∆∞·ªùi v·∫´n OK
];

let results = [];

// ================= QUAY S·ªê HI·ªÜU ·ª®NG =================
function draw(){
  if(items.length === 0){
    document.getElementById("result").innerText = "H·∫æT DANH S√ÅCH";
    return;
  }

  let duration = 3000; // th·ªùi gian quay (ms)
  let intervalTime = 60;
  let start = Date.now();
  let temp;

  let interval = setInterval(()=>{
    temp = items[Math.floor(Math.random()*items.length)];
    document.getElementById("result").innerText =
      temp.code + " - " + temp.name;

    // hi·ªáu ·ª©ng ph√≥ng nh·∫π
    document.getElementById("result").style.transform =
      "scale(" + (1 + Math.random()*0.05) + ")";

    if(Date.now() - start > duration){
      clearInterval(interval);

      let index = items.indexOf(temp);
      items.splice(index,1);

      let prize = document.getElementById("prize").value;
      results.push({prize,...temp});
      log(prize,temp);

      // hi·ªáu ·ª©ng tr√∫ng gi·∫£i
      document.getElementById("result").style.transform = "scale(1.2)";
      setTimeout(()=>{
        document.getElementById("result").style.transform = "scale(1)";
      },300);
    }
  }, intervalTime);
}

// ================= LOG K·∫æT QU·∫¢ =================
function log(prize,item){
  document.getElementById("log").innerHTML +=
    "üèÜ <b>"+prize+"</b>: "+item.code+" - "+item.name+"<br>";
}

// ================= XU·∫§T EXCEL =================
function exportCSV(){
  let csv="Prize,Code,Name\n";
  results.forEach(r=>{
    csv += `${r.prize},${r.code},${r.name}\n`;
  });
  let blob = new Blob([csv],{type:"text/csv"});
  let a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "ketqua_quayso.csv";
  a.click();
}
</script>

</body>
</html>
