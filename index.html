<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Lucky Draw Pro</title>

<style>
body{
  background:url("nen.jpg") center/cover no-repeat fixed;
  font-family:'Segoe UI',Arial;
  color:#fff;
  text-align:center;
  margin:0;
  min-height:100vh;
}
.container{
  padding:40px;
  backdrop-filter: blur(2px);
}
h1{
  font-size:48px;
  margin-bottom:20px;
  letter-spacing:2px;
}
.card{
  background:rgba(255,255,255,0.95);
  color:#333;
  display:inline-block;
  padding:35px 60px;
  border-radius:24px;
  box-shadow:0 30px 60px rgba(0,0,0,.45);
}

/* ===== SLOT NUMBER ===== */
.slot{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:25px 0;
}
.digit{
  width:70px;
  height:90px;
  background:#1b5e20;
  color:#fff;
  font-size:54px;
  font-weight:bold;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:inset 0 -6px 0 rgba(0,0,0,.25);
  transition:transform .15s;
}

/* ===== CONTROLS ===== */
select{
  padding:10px 16px;
  font-size:18px;
  border-radius:10px;
  border:1px solid #ccc;
}

button{
  margin-top:20px;
  border:none;
  cursor:pointer;
}

/* ===== SPIN BUTTON ===== */
#spinBtn{
  width:150px;
  height:150px;
  border-radius:50%;
  background:#2e7d32;
  color:#fff;
  font-size:30px;
  font-weight:bold;
  box-shadow:0 12px 30px rgba(0,0,0,.4);
}
#spinBtn:hover{
  background:#388e3c;
  transform:scale(1.05);
}

/* ===== EXPORT ===== */
#exportBtn{
  margin-top:25px;
  background:#e53935;
  color:#fff;
  padding:14px 36px;
  border-radius:30px;
  font-size:20px;
}

#log{
  margin-top:25px;
  max-height:200px;
  overflow:auto;
  text-align:left;
  font-size:15px;
}
</style>
</head>

<body>
<div class="container">
  <h1>üéØ QUAY S·ªê MAY M·∫ÆN</h1>

  <div class="card">

    <div>
      üéÅ <b>Ch·ªçn gi·∫£i:</b><br>
      <select id="prize">
        <option>Gi·∫£i Nh·∫•t</option>
        <option>Gi·∫£i Nh√¨</option>
        <option>Gi·∫£i Ba</option>
        <option>Khuy·∫øn Kh√≠ch</option>
      </select>
    </div>

    <!-- SLOT -->
    <div class="slot" id="slot">
      <div class="digit">0</div>
      <div class="digit">0</div>
      <div class="digit">0</div>
      <div class="digit">0</div>
      <div class="digit">0</div>
    </div>

    <button id="spinBtn" onclick="draw()">QUAY</button><br>

    <button id="exportBtn" onclick="exportCSV()">üì• Xu·∫•t k·∫øt qu·∫£</button>

    <div id="log"></div>
  </div>
</div>

<script>
// ===== DANH S√ÅCH QUAY =====
let items=[
 {code:"00001",name:"Nguy·ªÖn VƒÉn A"},
 {code:"00002",name:"Tr·∫ßn Th·ªã B"},
 {code:"00003",name:"L√™ VƒÉn C"},
 {code:"00004",name:"Ph·∫°m Th·ªã D"},
 {code:"00005",name:"Ho√†ng VƒÉn E"},
 // th√™m t·ªõi 70 ng∆∞·ªùi OK
];
let results=[];

// ===== HI·ªÜU ·ª®NG SLOT =====
function spinDigits(target){
  let digits=document.querySelectorAll(".digit");
  let loops=20;
  let count=0;

  let interval=setInterval(()=>{
    digits.forEach(d=>{
      d.innerText=Math.floor(Math.random()*10);
      d.style.transform="scale(1.1)";
    });
    count++;
    if(count>loops){
      clearInterval(interval);
      target.code.split("").forEach((num,i)=>{
        digits[i].innerText=num;
        digits[i].style.transform="scale(1)";
      });
    }
  },80);
}

// ===== QUAY =====
function draw(){
  if(items.length===0){
    alert("H·∫æT DANH S√ÅCH");
    return;
  }
  let i=Math.floor(Math.random()*items.length);
  let item=items.splice(i,1)[0];
  spinDigits(item);

  let prize=document.getElementById("prize").value;
  results.push({prize,...item});

  setTimeout(()=>{
    document.getElementById("log").innerHTML+=
      "üèÜ <b>"+prize+"</b>: "+item.code+" - "+item.name+"<br>";
  },2000);
}

// ===== EXPORT =====
function exportCSV(){
  let csv="Prize,Code,Name\n";
  results.forEach(r=>{
    csv+=`${r.prize},${r.code},${r.name}\n`;
  });
  let blob=new Blob([csv],{type:"text/csv"});
  let a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="ketqua_quayso.csv";
  a.click();
}
</script>
</body>
</html>
